<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# catalogue

```go
import "github.com/blueprint-uservices/blueprint/examples/sockshop/workflow/catalogue"
```

Package catalogue implements the SockShop catalogue microservice

## Index

- [Variables](<#variables>)
- [type CatalogueService](<#CatalogueService>)
  - [func NewCatalogueService\(ctx context.Context, db backend.RelationalDB\) \(CatalogueService, error\)](<#NewCatalogueService>)
- [type Sock](<#Sock>)


## Variables

<a name="ErrDBConnection"></a>ErrDBConnection is returned when connection with the database fails.

```go
var ErrDBConnection = errors.New("database connection error")
```

<a name="ErrNotFound"></a>ErrNotFound is returned when there is no sock for a given ID.

```go
var ErrNotFound = errors.New("not found")
```

<a name="CatalogueService"></a>
## type [CatalogueService](<https://github.com/blueprint-uservices/blueprint/blob/main/examples/sockshop/workflow/catalogue/catalogueservice.go#L15-L41>)

The SockShop CatalogueService stores an inventory of Socks being sold by the shop.

```go
type CatalogueService interface {
    // List socks that match any of the tags specified.  Sort the results in the specified order,
    // then return a subset of the results.
    List(ctx context.Context, tags []string, order string, pageNum, pageSize int) ([]Sock, error)

    // Counts the number of socks that match any of the tags specified.
    Count(ctx context.Context, tags []string) (int, error)

    // Gets details about a [Sock]
    Get(ctx context.Context, id string) (Sock, error)

    // Lists all tags
    Tags(ctx context.Context) ([]string, error)

    // New for Blueprint: adds tags to the database if they do not already exist.
    AddTags(ctx context.Context, tags []string) error

    // New for Blueprint: adds a sock to the database.
    // If sock.ID is "" then an ID is generated; otherwise the provided ID is used.
    // If the sock has tags that aren't yet in the DB, then the tags are added to the DB.
    // If the sock ID already exists in the database, then the sock is updated
    // Returns the ID of the sock
    AddSock(ctx context.Context, sock Sock) (string, error)

    // New for Blueprint: deletes a sock from the database.
    DeleteSock(ctx context.Context, id string) error
}
```

<a name="NewCatalogueService"></a>
### func [NewCatalogueService](<https://github.com/blueprint-uservices/blueprint/blob/main/examples/sockshop/workflow/catalogue/catalogueservice.go#L90>)

```go
func NewCatalogueService(ctx context.Context, db backend.RelationalDB) (CatalogueService, error)
```

Creates a [CatalogueService](<#CatalogueService>) instance that stores the item catalogue in the provided relational database

<a name="Sock"></a>
## type [Sock](<https://github.com/blueprint-uservices/blueprint/blob/main/examples/sockshop/workflow/catalogue/catalogueservice.go#L44-L55>)

Sock describes the things on offer in the catalogue.

```go
type Sock struct {
    ID          string   `json:"id" db:"sock_id"`
    Name        string   `json:"name" db:"name"`
    Description string   `json:"description" db:"description"`
    ImageURL    []string `json:"imageUrl" db:"-"`
    ImageURL_1  string   `json:"-" db:"image_url_1"`
    ImageURL_2  string   `json:"-" db:"image_url_2"`
    Price       float32  `json:"price" db:"price"`
    Quantity    int      `json:"quantity" db:"quantity"`
    Tags        []string `json:"tag" db:"-"`
    TagString   string   `json:"-" db:"tag_name"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
