<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# clientpool

```go
import "github.com/blueprint-uservices/blueprint/runtime/plugins/clientpool"
```

Package clientpool implements the runtime components of Blueprint's ClientPool plugin.

ClientPools do not need to be used directly by application workflow specs. Instead, this code is included in a compiled application by applying the ClientPool modifier to the wiring spec.

## Index

- [type ClientPool](<#ClientPool>)
  - [func NewClientPool\[T any\]\(capacity int, build func\(\) \(T, error\)\) \*ClientPool\[T\]](<#NewClientPool>)
  - [func \(pool \*ClientPool\[T\]\) Available\(\) int](<#ClientPool[T].Available>)
  - [func \(pool \*ClientPool\[T\]\) Capacity\(\) int](<#ClientPool[T].Capacity>)
  - [func \(pool \*ClientPool\[T\]\) Pop\(ctx context.Context\) \(client T, err error\)](<#ClientPool[T].Pop>)
  - [func \(pool \*ClientPool\[T\]\) Push\(client T\)](<#ClientPool[T].Push>)
  - [func \(pool \*ClientPool\[T\]\) Size\(\) int](<#ClientPool[T].Size>)


<a name="ClientPool"></a>
## type [ClientPool](<https://github.com/blueprint-uservices/blueprint/blob/main/runtime/plugins/clientpool/clientpool.go#L16-L23>)

A ClientPool that contains up to Capacity clients. Clients are acquired with Pop and returned with Push.

```go
type ClientPool[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewClientPool"></a>
### func [NewClientPool](<https://github.com/blueprint-uservices/blueprint/blob/main/runtime/plugins/clientpool/clientpool.go#L30>)

```go
func NewClientPool[T any](capacity int, build func() (T, error)) *ClientPool[T]
```

Instantiates a [ClientPool](<#ClientPool>) that will have up to maxClients client instances. The provided function fn is used to instantiate clients.

Callers acquire a client instance by calling [ClientPool.Pop](<#ClientPool.Pop>), and when they are finished with a client, return it to the pool by calling [ClientPool.Push](<#ClientPool.Push>)

<a name="ClientPool[T].Available"></a>
### func \(\*ClientPool\[T\]\) [Available](<https://github.com/blueprint-uservices/blueprint/blob/main/runtime/plugins/clientpool/clientpool.go#L99>)

```go
func (pool *ClientPool[T]) Available() int
```

Returns the current number of available clients in the client pool

<a name="ClientPool[T].Capacity"></a>
### func \(\*ClientPool\[T\]\) [Capacity](<https://github.com/blueprint-uservices/blueprint/blob/main/runtime/plugins/clientpool/clientpool.go#L89>)

```go
func (pool *ClientPool[T]) Capacity() int
```

Returns the capacity of the client pool

<a name="ClientPool[T].Pop"></a>
### func \(\*ClientPool\[T\]\) [Pop](<https://github.com/blueprint-uservices/blueprint/blob/main/runtime/plugins/clientpool/clientpool.go#L46>)

```go
func (pool *ClientPool[T]) Pop(ctx context.Context) (client T, err error)
```

Acquires a client from the pool, blocking if all clients are currently in use.

When a caller has finished using a client, it \*must\* call [ClientPool.Push](<#ClientPool.Push>) to return the client to the pool.

<a name="ClientPool[T].Push"></a>
### func \(\*ClientPool\[T\]\) [Push](<https://github.com/blueprint-uservices/blueprint/blob/main/runtime/plugins/clientpool/clientpool.go#L83>)

```go
func (pool *ClientPool[T]) Push(client T)
```

Returns a client to the pool.

<a name="ClientPool[T].Size"></a>
### func \(\*ClientPool\[T\]\) [Size](<https://github.com/blueprint-uservices/blueprint/blob/main/runtime/plugins/clientpool/clientpool.go#L94>)

```go
func (pool *ClientPool[T]) Size() int
```

Returns the current size of the client pool

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
