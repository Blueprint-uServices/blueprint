<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# codegen

```go
import "github.com/blueprint-uservices/blueprint/plugins/gotests/codegen"
```

Package codegen implements the gotest plugin's code generation logic.

Generates the blueprint\_clients.go file that gets added to test packages. This is used internally by the gotest package.

A blueprint\_clients.go file is generated for any package where a [registry.ServiceRegistry](<https://github.com/blueprint-uservices/blueprint/tree/main/runtime/core/registry>) is used. The file adds a static initialization block that registers an instance of the 'real' application client.

## Index

- [type ClientBuilder](<#ClientBuilder>)
  - [func NewClientBuilder\(packageName, packageShortName, namespaceConstructor, namespacePackage, namespaceName, outputDir string\) \*ClientBuilder](<#NewClientBuilder>)
  - [func \(b \*ClientBuilder\) AddClient\(registryVar, clientName, nodeToInstantiate string, clientType gocode.TypeName\)](<#ClientBuilder.AddClient>)
  - [func \(b \*ClientBuilder\) Build\(\) error](<#ClientBuilder.Build>)


<a name="ClientBuilder"></a>
## type [ClientBuilder](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/gotests/codegen/blueprint_clients.go.go#L23-L30>)

Used by the gotests plugin to generate the blueprint\_clients.go file

```go
type ClientBuilder struct {
    PackageShortName     string // The package name to use in the package declaration
    NamespaceConstructor string // The func that creates the namespace
    NamespaceName        string // The name to use for the namespace
    OutputDir            string // The output directory; should be the same as the package directory
    Clients              []*clientRegistration
    Imports              *gogen.Imports // Manages imports for us
}
```

<a name="NewClientBuilder"></a>
### func [NewClientBuilder](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/gotests/codegen/blueprint_clients.go.go#L47>)

```go
func NewClientBuilder(packageName, packageShortName, namespaceConstructor, namespacePackage, namespaceName, outputDir string) *ClientBuilder
```

Create a new builder to generate a blueprint\_clients.go file.

- outputDir points to an output directory
- packageName should correspond to the correct fully\-qualified package name of the outputDir
- packageShortName should correspond to the name to use in the "package" declaration of the file
- namespacePackage is the package to import that contains namespaceConstructor
- namespaceConstructor is of the form shortname.Method \- it is the method to call to build the client library
- namespaceName can be any name

<a name="ClientBuilder.AddClient"></a>
### func \(\*ClientBuilder\) [AddClient](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/gotests/codegen/blueprint_clients.go.go#L67>)

```go
func (b *ClientBuilder) AddClient(registryVar, clientName, nodeToInstantiate string, clientType gocode.TypeName)
```

Add a client registration to the generated blueprint\_clients.go file

- registryVar is a variable name within the output package of a ServiceRegistry\[clientType\]
- clientName can be any name
- nodeToInstantiate is the node within the namespace to Get to create the client
- clientType is the service interface being created.

<a name="ClientBuilder.Build"></a>
### func \(\*ClientBuilder\) [Build](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/gotests/codegen/blueprint_clients.go.go#L78>)

```go
func (b *ClientBuilder) Build() error
```

Generate the blueprint\_clients.go file.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
