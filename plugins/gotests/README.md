<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# gotests

```go
import "gitlab.mpi-sws.org/cld/blueprint/plugins/gotests"
```

Package gotests provides a plugin for automatically converting workflow spec unit tests into tests that can run against a compiled Blueprint system.

## Index

- [func Test\(spec wiring.WiringSpec, servicesToTest ...string\) string](<#Test>)
- [type TestLibrary](<#TestLibrary>)
  - [func \(lib \*TestLibrary\) GenerateArtifacts\(workspaceDir string\) error](<#TestLibrary.GenerateArtifacts>)
  - [func \(lib \*TestLibrary\) Name\(\) string](<#TestLibrary.Name>)
  - [func \(lib \*TestLibrary\) String\(\) string](<#TestLibrary.String>)


<a name="Test"></a>
## func Test

```go
func Test(spec wiring.WiringSpec, servicesToTest ...string) string
```

Specifies that any compatible unit dests defined for serviceName should be automatically converted into tests for the compiled Blueprint system.

The gotests plugin will produce an output golang workspace called "tests" that will include modified versions of the source unit tests. After running the compiled Blueprint system, you can run the tests with the usual 'go test'.

Tests must meet the following criteria to be included:

- tests are written using go's standard testing library
- tests are contained in a separate module from the workflow spec \(and thus are black\-box tests\), needed to prevent circular module dependencies
- tests make use of the core runtime registry.ServiceRegistry to acquire client instances \(as opposed to manually constructing them\).

<a name="TestLibrary"></a>
## type TestLibrary



```go
type TestLibrary struct {
    ir.ArtifactGenerator

    LibraryName    string
    ModuleName     string
    ArgNodes       []ir.IRNode
    ContainedNodes []ir.IRNode
    ServicesToTest map[string]ir.IRNode
}
```

<a name="TestLibrary.GenerateArtifacts"></a>
### func \(\*TestLibrary\) GenerateArtifacts

```go
func (lib *TestLibrary) GenerateArtifacts(workspaceDir string) error
```

Generates a golang workspace to a directory on the local filesystem.

Within the workspace will have converted all compatible unit tests into tests that can be run against the generated Blueprint system. The generated Blueprint system must be running for the tests to work.

<a name="TestLibrary.Name"></a>
### func \(\*TestLibrary\) Name

```go
func (lib *TestLibrary) Name() string
```



<a name="TestLibrary.String"></a>
### func \(\*TestLibrary\) String

```go
func (lib *TestLibrary) String() string
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
