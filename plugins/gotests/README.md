<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# gotests

```go
import "github.com/blueprint-uservices/blueprint/plugins/gotests"
```

Package gotests provides a Blueprint plugin for automatically converting black\-box workflow spec unit tests into tests that can run against a compiled Blueprint system.

To use the gotests plugin in a wiring spec, call gotests.[Test](<#Test>) and specify the services to test. During compilation the plugin will search for compatible black\-box tests, modify them, and include the modified tests in the compiled output.

Tests are only compatible if they meet the following requirements:

- tests are contained in a separate module from the workflow spec
- the test module is on the workflow spec search path \(e.g. using [workflow.Init](<https://github.com/blueprint-uservices/blueprint/tree/main/plugins/workflow>)\)
- tests use the [registry.ServiceRegistry](<https://github.com/blueprint-uservices/blueprint/tree/main/runtime/core/registry>) to acquire service clients

To run the generated tests:

1. start the compiled application
2. navigate to the 'tests' directory in the compiled output
3. run \`go test\` passing any required command\-line arguments such as addresses

A test can potentially leave state within the application; running the test twice in succession may result in a failure the second time since the application is not in a clean state.

See [Workflow Tests](<https://github.com/blueprint-uservices/blueprint/tree/main/docs/manual/workflow_tests.md>) for more information on writing workflow tests.

## Index

- [func Test\(spec wiring.WiringSpec, servicesToTest ...string\) string](<#Test>)


<a name="Test"></a>
## func [Test](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/gotests/wiring.go#L54>)

```go
func Test(spec wiring.WiringSpec, servicesToTest ...string) string
```

Auto\-generates tests for servicesToTest by converting existing black\-box workflow unit tests. After compilation, the output will contain a golang workspace called "tests" that will include modified versions of the source tests.

servicesToTest should be the names of golang services instantiated in the wiring spec.

The gotests plugin searches for any workflow packages with tests that make use of [registry.ServiceRegistry](<https://github.com/blueprint-uservices/blueprint/tree/main/runtime/core/registry>). Matching modules are copied to an output golang workspace caled "tests". Matching packges in the output workspace will have a file blueprint\_clients.go that registers a service client.

Returns the name "gotests" which must be included when later calling \[wiring.WiringSpec.BuildIR\]

For more information about tests see [Workflow Tests](<https://github.com/blueprint-uservices/blueprint/tree/main/docs/manual/workflow_tests.md>).

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
