<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# latency

```go
import "github.com/Blueprint-uServices/blueprint/plugins/latency"
```

Package latencyinjector provides a Blueprint modifier for the server side of service calls.

The plugin configures the server side to inject a user\-defined amount of latency. Currently latency is injected for all requests and only a pre\-defined duration is supported with no variance/noise added. The plugin will generate a wrapper class that will sleep for a fixed amount of time \(the specified latency to be injected\) before invoking the handler for handling the request. Example Usage to add 100ms latency to each request:

```
import "github.com/Blueprint-uServices/blueprint/plugins/latency"
latency.AddFixed(spec, "my_service", "100ms")
```

TODO: Allow latency to be injected selectively to a subset of requests based using random sampling or by matching attributes of a request. TODO: Sample injected latency from a configurable distribution and support choosing the distribution.

If you need the above feature\(s\) consider submitting a PR, raising a feature request, or posting on the Blueprint slack/mailing list.

## Index

- [func AddFixed\(spec wiring.WiringSpec, serviceName string, latency string\)](<#AddFixed>)
- [type LatencyInjectorWrapper](<#LatencyInjectorWrapper>)
  - [func \(node \*LatencyInjectorWrapper\) AddInstantiation\(builder golang.NamespaceBuilder\) error](<#LatencyInjectorWrapper.AddInstantiation>)
  - [func \(node \*LatencyInjectorWrapper\) AddInterfaces\(builder golang.ModuleBuilder\) error](<#LatencyInjectorWrapper.AddInterfaces>)
  - [func \(node \*LatencyInjectorWrapper\) GenerateFuncs\(builder golang.ModuleBuilder\) error](<#LatencyInjectorWrapper.GenerateFuncs>)
  - [func \(node \*LatencyInjectorWrapper\) GetInterface\(ctx ir.BuildContext\) \(service.ServiceInterface, error\)](<#LatencyInjectorWrapper.GetInterface>)
  - [func \(node \*LatencyInjectorWrapper\) ImplementsGolangNode\(\)](<#LatencyInjectorWrapper.ImplementsGolangNode>)
  - [func \(node \*LatencyInjectorWrapper\) ImplementsGolangService\(\)](<#LatencyInjectorWrapper.ImplementsGolangService>)
  - [func \(node \*LatencyInjectorWrapper\) Name\(\) string](<#LatencyInjectorWrapper.Name>)
  - [func \(node \*LatencyInjectorWrapper\) String\(\) string](<#LatencyInjectorWrapper.String>)


<a name="AddFixed"></a>
## func [AddFixed](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/wiring.go#L35>)

```go
func AddFixed(spec wiring.WiringSpec, serviceName string, latency string)
```

Adds fixed\-amount of latency on the server side during request processing for the specified sevrice. Uses a \[blueprint.WiringSpec\] Modifies the given service such that the server adds a fixed amount of \`latency\` while processing the request. The \`latency\` string must be a sequence of decimal numbers, each with optional fraction and a unit suffix, such as "300ms", "1.5h" or "2h45m". Valid time units are "ns", "us" \(or "Âµs"\), "ms", "s", "m", "h". Negative signed values such as "\-1.5h" would result in no explicit latency being added; although it might result in the go runtime re\-scheduling the running goroutine. Usage:

```
AddFixed(spec, "my_service", "100ms")
```

<a name="LatencyInjectorWrapper"></a>
## type [LatencyInjectorWrapper](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L15-L24>)

Blueprint IR Node representing a server side latency injector

```go
type LatencyInjectorWrapper struct {
    golang.Service
    golang.GeneratesFuncs
    golang.Instantiable

    InstanceName string
    Wrapped      golang.Service

    LatencyValue *ir.IRValue
    // contains filtered or unexported fields
}
```

<a name="LatencyInjectorWrapper.AddInstantiation"></a>
### func \(\*LatencyInjectorWrapper\) [AddInstantiation](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L81>)

```go
func (node *LatencyInjectorWrapper) AddInstantiation(builder golang.NamespaceBuilder) error
```

Implements golang.Instantiable

<a name="LatencyInjectorWrapper.AddInterfaces"></a>
### func \(\*LatencyInjectorWrapper\) [AddInterfaces](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L57>)

```go
func (node *LatencyInjectorWrapper) AddInterfaces(builder golang.ModuleBuilder) error
```

Implements \[golang.Service\]

<a name="LatencyInjectorWrapper.GenerateFuncs"></a>
### func \(\*LatencyInjectorWrapper\) [GenerateFuncs](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L67>)

```go
func (node *LatencyInjectorWrapper) GenerateFuncs(builder golang.ModuleBuilder) error
```

Implements \[golang.GeneratesFuncs\]

<a name="LatencyInjectorWrapper.GetInterface"></a>
### func \(\*LatencyInjectorWrapper\) [GetInterface](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L62>)

```go
func (node *LatencyInjectorWrapper) GetInterface(ctx ir.BuildContext) (service.ServiceInterface, error)
```

Implements \[golang.Service\]

<a name="LatencyInjectorWrapper.ImplementsGolangNode"></a>
### func \(\*LatencyInjectorWrapper\) [ImplementsGolangNode](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L41>)

```go
func (node *LatencyInjectorWrapper) ImplementsGolangNode()
```

Implements \[ir.IRNode\]

<a name="LatencyInjectorWrapper.ImplementsGolangService"></a>
### func \(\*LatencyInjectorWrapper\) [ImplementsGolangService](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L44>)

```go
func (node *LatencyInjectorWrapper) ImplementsGolangService()
```

Implements \[golang.Service\]

<a name="LatencyInjectorWrapper.Name"></a>
### func \(\*LatencyInjectorWrapper\) [Name](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L47>)

```go
func (node *LatencyInjectorWrapper) Name() string
```

Implements \[ir.IRNode\]

<a name="LatencyInjectorWrapper.String"></a>
### func \(\*LatencyInjectorWrapper\) [String](<https://gitlab.mpi-sws.org/cld/blueprint2/blueprint/blob/main/plugins/latency/ir.go#L52>)

```go
func (node *LatencyInjectorWrapper) String() string
```

Implements \[ir.IRNode\]

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
