<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# gogen

```go
import "github.com/blueprint-uservices/blueprint/plugins/golang/gogen"
```

Package gogen provides implementations of the builder interfaces defined by the [golang](<https://github.com/Blueprint-uServices/blueprint/tree/main/plugins/golang>) plugin

The builders are intended for use by plugins that define golang namespace nodes. For example, the [goproc](<https://github.com/Blueprint-uServices/blueprint/tree/main/plugins/goproc>) plugin defines a process node that collects together golang instance nodes. The [goproc](<https://github.com/Blueprint-uServices/blueprint/tree/main/plugins/goproc>) plugin then uses the builders defined here to accumulate the code declarations of those golang instances, and to generate the main file for the process.

## Index

- [func ExecuteTemplate\(name string, body string, args any\) \(string, error\)](<#ExecuteTemplate>)
- [func ExecuteTemplateToFile\(name string, body string, args any, filename string\) error](<#ExecuteTemplateToFile>)
- [type Imports](<#Imports>)
  - [func NewImports\(packageName string\) \*Imports](<#NewImports>)
  - [func \(imports \*Imports\) AddPackage\(pkg string\) string](<#Imports.AddPackage>)
  - [func \(imports \*Imports\) AddPackages\(pkgs ...string\)](<#Imports.AddPackages>)
  - [func \(imports \*Imports\) AddType\(typeName gocode.TypeName\)](<#Imports.AddType>)
  - [func \(imports \*Imports\) NameOf\(typeName gocode.TypeName\) string](<#Imports.NameOf>)
  - [func \(imports \*Imports\) Qualify\(pkg string, name string\) string](<#Imports.Qualify>)
  - [func \(imports \*Imports\) String\(\) string](<#Imports.String>)
- [type ModuleBuilderImpl](<#ModuleBuilderImpl>)
  - [func NewModuleBuilder\(workspace \*WorkspaceBuilderImpl, moduleName string\) \(\*ModuleBuilderImpl, error\)](<#NewModuleBuilder>)
  - [func \(module \*ModuleBuilderImpl\) CreatePackage\(packageName string\) \(golang.PackageInfo, error\)](<#ModuleBuilderImpl.CreatePackage>)
  - [func \(module \*ModuleBuilderImpl\) ImplementsBuildContext\(\)](<#ModuleBuilderImpl.ImplementsBuildContext>)
  - [func \(module \*ModuleBuilderImpl\) Info\(\) golang.ModuleInfo](<#ModuleBuilderImpl.Info>)
  - [func \(module \*ModuleBuilderImpl\) Require\(moduleName string, version string\) error](<#ModuleBuilderImpl.Require>)
  - [func \(module \*ModuleBuilderImpl\) Workspace\(\) golang.WorkspaceBuilder](<#ModuleBuilderImpl.Workspace>)
- [type NamespaceBuilderImpl](<#NamespaceBuilderImpl>)
  - [func NewNamespaceBuilder\(module golang.ModuleBuilder, name, fileName, packagePath, funcName string\) \(\*NamespaceBuilderImpl, error\)](<#NewNamespaceBuilder>)
  - [func \(code \*NamespaceBuilderImpl\) Build\(\) error](<#NamespaceBuilderImpl.Build>)
  - [func \(n \*NamespaceBuilderImpl\) Declare\(name, buildFuncSrc string\) error](<#NamespaceBuilderImpl.Declare>)
  - [func \(namespace \*NamespaceBuilderImpl\) DeclareConstructor\(name string, constructor \*gocode.Constructor, args \[\]ir.IRNode\) error](<#NamespaceBuilderImpl.DeclareConstructor>)
  - [func \(code \*NamespaceBuilderImpl\) ImplementsBuildContext\(\)](<#NamespaceBuilderImpl.ImplementsBuildContext>)
  - [func \(n \*NamespaceBuilderImpl\) Import\(packageName string\) string](<#NamespaceBuilderImpl.Import>)
  - [func \(n \*NamespaceBuilderImpl\) ImportType\(typeName gocode.TypeName\) string](<#NamespaceBuilderImpl.ImportType>)
  - [func \(n \*NamespaceBuilderImpl\) Info\(\) golang.NamespaceInfo](<#NamespaceBuilderImpl.Info>)
  - [func \(n \*NamespaceBuilderImpl\) Instantiate\(name string\)](<#NamespaceBuilderImpl.Instantiate>)
  - [func \(n \*NamespaceBuilderImpl\) Module\(\) golang.ModuleBuilder](<#NamespaceBuilderImpl.Module>)
  - [func \(n \*NamespaceBuilderImpl\) OptionalArg\(name, description string\)](<#NamespaceBuilderImpl.OptionalArg>)
  - [func \(n \*NamespaceBuilderImpl\) RequiredArg\(name, description string\)](<#NamespaceBuilderImpl.RequiredArg>)
- [type WorkspaceBuilderImpl](<#WorkspaceBuilderImpl>)
  - [func NewWorkspaceBuilder\(workspaceDir string\) \(\*WorkspaceBuilderImpl, error\)](<#NewWorkspaceBuilder>)
  - [func \(workspace \*WorkspaceBuilderImpl\) AddLocalModule\(shortName string, moduleSrcPath string\) \(string, error\)](<#WorkspaceBuilderImpl.AddLocalModule>)
  - [func \(workspace \*WorkspaceBuilderImpl\) CreateModule\(moduleName string, moduleVersion string\) \(string, error\)](<#WorkspaceBuilderImpl.CreateModule>)
  - [func \(workspace \*WorkspaceBuilderImpl\) Finish\(\) error](<#WorkspaceBuilderImpl.Finish>)
  - [func \(workspace \*WorkspaceBuilderImpl\) GetLocalModule\(modulePath string\) \(string, bool\)](<#WorkspaceBuilderImpl.GetLocalModule>)
  - [func \(workspace \*WorkspaceBuilderImpl\) ImplementsBuildContext\(\)](<#WorkspaceBuilderImpl.ImplementsBuildContext>)
  - [func \(workspace \*WorkspaceBuilderImpl\) Info\(\) golang.WorkspaceInfo](<#WorkspaceBuilderImpl.Info>)


<a name="ExecuteTemplate"></a>
## func [ExecuteTemplate](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/template.go#L26>)

```go
func ExecuteTemplate(name string, body string, args any) (string, error)
```

A helper function for executing [text/template](<https://pkg.go.dev/text/template/>) templates to string.

When executing the provided template body, the body can make use of a number of convenience functions. See [gogen/template.go](<https://github.com/Blueprint-uServices/blueprint/tree/main/plugins/golang/gogen/template.go>) for details.

<a name="ExecuteTemplateToFile"></a>
## func [ExecuteTemplateToFile](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/template.go#L46>)

```go
func ExecuteTemplateToFile(name string, body string, args any, filename string) error
```

A helper function for executing [text/template](<https://pkg.go.dev/text/template/>) templates to file

When executing the provided template body, the body can make use of a number of convenience functions. See [gogen/template.go](<https://github.com/Blueprint-uServices/blueprint/tree/main/plugins/golang/gogen/template.go>) for details.

<a name="Imports"></a>
## type [Imports](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/imports.go#L21-L27>)

A helper struct for managing imports in generated golang files.

Used by plugins like the GRPC plugin.

The string representation of the Imports struct is the import declaration.

The NameOf method provides the correctly qualified name for the specified userType

```go
type Imports struct {
    // contains filtered or unexported fields
}
```

<a name="NewImports"></a>
### func [NewImports](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/imports.go#L31>)

```go
func NewImports(packageName string) *Imports
```

Creates a new ImportedPackages struct, treating the provided fully\-qualified packageName as the "current" package

<a name="Imports.AddPackage"></a>
### func \(\*Imports\) [AddPackage](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/imports.go#L43>)

```go
func (imports *Imports) AddPackage(pkg string) string
```

Imports the fully\-qualified package pkg. Returns the shortname of the package, to use when referring to names exported by pkg.

<a name="Imports.AddPackages"></a>
### func \(\*Imports\) [AddPackages](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/imports.go#L72>)

```go
func (imports *Imports) AddPackages(pkgs ...string)
```



<a name="Imports.AddType"></a>
### func \(\*Imports\) [AddType](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/imports.go#L79>)

```go
func (imports *Imports) AddType(typeName gocode.TypeName)
```

Adds all necessary import statements to be able to use typeName

<a name="Imports.NameOf"></a>
### func \(\*Imports\) [NameOf](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/imports.go#L143>)

```go
func (imports *Imports) NameOf(typeName gocode.TypeName) string
```

Returns the qualified import name to use for typeName

<a name="Imports.Qualify"></a>
### func \(\*Imports\) [Qualify](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/imports.go#L132>)

```go
func (imports *Imports) Qualify(pkg string, name string) string
```

Given fully\-qualified package name pkg and exported member name, returns the short name used to reference that member.

e.g. Qualify\("github.com/blueprint\-uservices/plugins/golang/gogen", "Imports"\) returns "gogen.Imports"

<a name="Imports.String"></a>
### func \(\*Imports\) [String](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/imports.go#L114>)

```go
func (imports *Imports) String() string
```

Returns the import statement needed to import all added packages and types

<a name="ModuleBuilderImpl"></a>
## type [ModuleBuilderImpl](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/modulebuilder.go#L19-L26>)

Implements \[golang.ModuleBuilder\].

Creates a module on the local filesystem with a user\-provided module name.

```go
type ModuleBuilderImpl struct {
    ir.VisitTrackerImpl
    Name string // The FQ name of this module

    ModuleDir string // The directory containing this module
    // contains filtered or unexported fields
}
```

<a name="NewModuleBuilder"></a>
### func [NewModuleBuilder](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/modulebuilder.go#L38>)

```go
func NewModuleBuilder(workspace *WorkspaceBuilderImpl, moduleName string) (*ModuleBuilderImpl, error)
```

Creates a module within the provided workspace, and returns a [ModuleBuilderImpl](<#ModuleBuilderImpl>) that can be used to accumulate code in the created module.

The typical usage of this is by plugins such as the [goproc](<https://github.com/Blueprint-uServices/blueprint/tree/main/plugins/goproc>) plugin that accumulate golang nodes and generate code to run those nodes.

After calling this method, the returned ModuleBuilder can be passed to golang nodes, to accumulate the interfaces and funcs of those nodes.

<a name="ModuleBuilderImpl.CreatePackage"></a>
### func \(\*ModuleBuilderImpl\) [CreatePackage](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/modulebuilder.go#L62>)

```go
func (module *ModuleBuilderImpl) CreatePackage(packageName string) (golang.PackageInfo, error)
```

Implements \[golang.ModuleBuilder\]

<a name="ModuleBuilderImpl.ImplementsBuildContext"></a>
### func \(\*ModuleBuilderImpl\) [ImplementsBuildContext](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/modulebuilder.go#L107>)

```go
func (module *ModuleBuilderImpl) ImplementsBuildContext()
```



<a name="ModuleBuilderImpl.Info"></a>
### func \(\*ModuleBuilderImpl\) [Info](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/modulebuilder.go#L53>)

```go
func (module *ModuleBuilderImpl) Info() golang.ModuleInfo
```

Implements \[golang.ModuleBuilder\]

<a name="ModuleBuilderImpl.Require"></a>
### func \(\*ModuleBuilderImpl\) [Require](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/modulebuilder.go#L93>)

```go
func (module *ModuleBuilderImpl) Require(moduleName string, version string) error
```

Implements \[golang.ModuleBuilder\]

<a name="ModuleBuilderImpl.Workspace"></a>
### func \(\*ModuleBuilderImpl\) [Workspace](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/modulebuilder.go#L103>)

```go
func (module *ModuleBuilderImpl) Workspace() golang.WorkspaceBuilder
```

Implements \[golang.ModuleBuilder\]

<a name="NamespaceBuilderImpl"></a>
## type [NamespaceBuilderImpl](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L20-L33>)

Implements \[golang.NamespaceBuilder\].

Creates a source file, \{\{FileName\}\}.go, containing a function, \{\{FuncName\}\}. The body of \{\{FuncName\}\} instantiates all nodes of this namespace.

```go
type NamespaceBuilderImpl struct {
    ir.VisitTrackerImpl

    Package        golang.PackageInfo
    Name           string            // IR node name
    FileName       string            // The short name of the file
    FilePath       string            // The fully qualified path to the file
    FuncName       string            // The name of the function to generate
    Imports        *Imports          // Import declarations in the file; map of shortname to full package import name
    Declarations   map[string]string // The DI declarations
    Required       map[string]string
    Optional       map[string]string
    Instantiations []string
    // contains filtered or unexported fields
}
```

<a name="NewNamespaceBuilder"></a>
### func [NewNamespaceBuilder](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L46>)

```go
func NewNamespaceBuilder(module golang.ModuleBuilder, name, fileName, packagePath, funcName string) (*NamespaceBuilderImpl, error)
```

Creates a function called funcName within a file called fileName, within the provided module. Returns a [NamespaceBuilderImpl](<#NamespaceBuilderImpl>) that can be used to accumulate instantiation code.

The typical usage of this is by plugins such as the \[goproc\] plugin that accumulate golang nodes and generate code to run those nodes.

After calling this method, the returned [NamespaceBuilderImpl](<#NamespaceBuilderImpl>) can be passed to golang nodes, to accumulate the instantiation code for those nodes.

After all instantiations have been accumulated, the caller should invoke \[Build\], which will actually generate the file fileName, combining all provided node instantiation code snippets.

<a name="NamespaceBuilderImpl.Build"></a>
### func \(\*NamespaceBuilderImpl\) [Build](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L285>)

```go
func (code *NamespaceBuilderImpl) Build() error
```

Build should be the last invocation, used to generate the namespace file.

<a name="NamespaceBuilderImpl.Declare"></a>
### func \(\*NamespaceBuilderImpl\) [Declare](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L125>)

```go
func (n *NamespaceBuilderImpl) Declare(name, buildFuncSrc string) error
```

Implements \[golang.NamespaceBuilder\]

<a name="NamespaceBuilderImpl.DeclareConstructor"></a>
### func \(\*NamespaceBuilderImpl\) [DeclareConstructor](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L162>)

```go
func (namespace *NamespaceBuilderImpl) DeclareConstructor(name string, constructor *gocode.Constructor, args []ir.IRNode) error
```

Implements \[golang.NamespaceBuilder\]

<a name="NamespaceBuilderImpl.ImplementsBuildContext"></a>
### func \(\*NamespaceBuilderImpl\) [ImplementsBuildContext](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L290>)

```go
func (code *NamespaceBuilderImpl) ImplementsBuildContext()
```



<a name="NamespaceBuilderImpl.Import"></a>
### func \(\*NamespaceBuilderImpl\) [Import](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L90>)

```go
func (n *NamespaceBuilderImpl) Import(packageName string) string
```

Implements \[golang.NamespaceBuilder\]

<a name="NamespaceBuilderImpl.ImportType"></a>
### func \(\*NamespaceBuilderImpl\) [ImportType](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L95>)

```go
func (n *NamespaceBuilderImpl) ImportType(typeName gocode.TypeName) string
```

Implements \[golang.NamespaceBuilder\]

<a name="NamespaceBuilderImpl.Info"></a>
### func \(\*NamespaceBuilderImpl\) [Info](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L80>)

```go
func (n *NamespaceBuilderImpl) Info() golang.NamespaceInfo
```

Implements \[golang.NamespaceBuilder\]

<a name="NamespaceBuilderImpl.Instantiate"></a>
### func \(\*NamespaceBuilderImpl\) [Instantiate](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L115>)

```go
func (n *NamespaceBuilderImpl) Instantiate(name string)
```

Implements \[golang.NamespaceBuilder\]

<a name="NamespaceBuilderImpl.Module"></a>
### func \(\*NamespaceBuilderImpl\) [Module](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L100>)

```go
func (n *NamespaceBuilderImpl) Module() golang.ModuleBuilder
```

Implements \[golang.NamespaceBuilder\]

<a name="NamespaceBuilderImpl.OptionalArg"></a>
### func \(\*NamespaceBuilderImpl\) [OptionalArg](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L110>)

```go
func (n *NamespaceBuilderImpl) OptionalArg(name, description string)
```

Implements \[golang.NamespaceBuilder\]

<a name="NamespaceBuilderImpl.RequiredArg"></a>
### func \(\*NamespaceBuilderImpl\) [RequiredArg](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/namespacebuilder.go#L105>)

```go
func (n *NamespaceBuilderImpl) RequiredArg(name, description string)
```

Implements \[golang.NamespaceBuilder\]

<a name="WorkspaceBuilderImpl"></a>
## type [WorkspaceBuilderImpl](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/workspacebuilder.go#L23-L29>)

Implements \[golang.WorkspaceBuilder\].

Creates a golang workspace on the local filesystem

```go
type WorkspaceBuilderImpl struct {
    ir.VisitTrackerImpl
    WorkspaceDir     string            // The directory containing this workspace
    ModuleDirs       map[string]string // map from FQ module name to directory name within WorkspaceDir
    Modules          map[string]string // map from directory name to FQ module name within WorkspaceDir
    GeneratedModules map[string]string // map from directory name to FQ module name within WorkspaceDir
}
```

<a name="NewWorkspaceBuilder"></a>
### func [NewWorkspaceBuilder](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/workspacebuilder.go#L47>)

```go
func NewWorkspaceBuilder(workspaceDir string) (*WorkspaceBuilderImpl, error)
```

Creates a golang workspace in the specified directory on the local filesystem.

Calls to \[CreateModule\] will create golang modules in subdirectories of the workspace. The builder will automatically create the necessary go.mod files of modules, and go.work file of the workspace.

The typical usage of this is by plugins such as the \[goproc\] plugin that accumulate golang nodes and generate code to run those nodes.

After calling this method, the returned WorkspaceBuilder can be passed to golang nodes, to accumulate modules.

After all modules have been accumulated, the caller should invoke \[Finish\], which will write the go.work file, insert replace directives in go.mod files for sibling modules, and invoke go mod tidy to resolve external package dependencies.

Returns an error if the directory already exists.

<a name="WorkspaceBuilderImpl.AddLocalModule"></a>
### func \(\*WorkspaceBuilderImpl\) [AddLocalModule](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/workspacebuilder.go#L101>)

```go
func (workspace *WorkspaceBuilderImpl) AddLocalModule(shortName string, moduleSrcPath string) (string, error)
```

Implements \[golang.WorkspaceBuilder\]

<a name="WorkspaceBuilderImpl.CreateModule"></a>
### func \(\*WorkspaceBuilderImpl\) [CreateModule](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/workspacebuilder.go#L64>)

```go
func (workspace *WorkspaceBuilderImpl) CreateModule(moduleName string, moduleVersion string) (string, error)
```

Implements \[golang.WorkspaceBuilder\]

<a name="WorkspaceBuilderImpl.Finish"></a>
### func \(\*WorkspaceBuilderImpl\) [Finish](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/workspacebuilder.go#L183>)

```go
func (workspace *WorkspaceBuilderImpl) Finish() error
```

This method should be called by plugins after all modules in a workspace have been combined.

The method will do the following:

- creates a go.work file in the root of the workspace that points to all of the modules contained therein
- updates the go.mod files of all contained modules with 'replace' directives for any required modules that exist in the workspace

<a name="WorkspaceBuilderImpl.GetLocalModule"></a>
### func \(\*WorkspaceBuilderImpl\) [GetLocalModule](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/workspacebuilder.go#L149>)

```go
func (workspace *WorkspaceBuilderImpl) GetLocalModule(modulePath string) (string, bool)
```

Implements \[golang.WorkspaceBuilder\]

<a name="WorkspaceBuilderImpl.ImplementsBuildContext"></a>
### func \(\*WorkspaceBuilderImpl\) [ImplementsBuildContext](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/workspacebuilder.go#L268>)

```go
func (workspace *WorkspaceBuilderImpl) ImplementsBuildContext()
```



<a name="WorkspaceBuilderImpl.Info"></a>
### func \(\*WorkspaceBuilderImpl\) [Info](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/golang/gogen/workspacebuilder.go#L57>)

```go
func (workspace *WorkspaceBuilderImpl) Info() golang.WorkspaceInfo
```

Implements \[golang.WorkspaceBuilder\]

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
