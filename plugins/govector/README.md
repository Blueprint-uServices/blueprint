<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# govector

```go
import "github.com/blueprint-uservices/blueprint/plugins/govector"
```

Package govector provides a Blueprint plugin for collecting log messages from services using the GoVector vector clock logging library. GoVector is a vector clock logging library developed for educational purposes by researchers at UBC Systopia. More information on [GoVector](<https://github.com/DistributedClocks/GoVector>). This plugin provides APIs to be used by the wiring spec to do the following:

1. to wrap the client and server side of a service with a GoVector wrapper to maintain and propagate vector clocks for each process. A vector clock is a logical clock maintained by every process in a distributed system which can then be used to establish partial order between distributed operations. The plugin generates a log file for each process where the incremental vector timestamps are stored to track the propagation of requests.
2. to install a GoVector logger for a given process. The log messages are appended with vector timestamps and added to a log file in chronological order. Log files from all processes can be combined to visualize the full execution of a distributed system.

### Wiring Usage

To instrument the service to correctly propagate vector clocks:

```
govector.Instrument(spec, service)
```

To instantiate a process's vector clock and to redirect a process's logging statements to GoVector:

```
govector.Logger(spec, proc)
```

### Artifacts generated

1. Generates client and server side wrappers for instrumented services that contain govector instrumentation \(vector clock per process, vector clock propagation\)

### Runtime Output

At runtime, a log file called \`proc\_name.goveclogger\-Log.txt\` will be generated for each process \(with name \`proc\_name\`\) and placed in that process's directory. Here is a sample generated log entry from a generated log file:

```
nonleaf_process_logger.goveclogger {"nonleaf_process_logger.goveclogger":1}
Initialization Complete
```

### Full Wiring Example:

The following example instruments all services with govector and uses the govector logger in all processes.

```
func applyGoVectorOptions() {
	for _, service := range serviceNames {
		govector.Instrument(spec, service) // Instrument the service to propagate vector clocks
	}
	for _, proc := range procNames {
		logger := govector.Logger(spec, proc) // Define a logger for the process
	}
}
```

See the [govector\\\_logger](<https://github.com/Blueprint-uServices/blueprint/tree/main/examples/leaf/wiring/specs/govector.go>) wiring spec for the Leaf application for a more concrete example.

### Viewing Logs

The log files generated by GoVector plugin can be converted into a single log file using the [GoVector](<https://github.com/DistributedClocks/GoVector>) command line tool which can then be visualized using the [ShiViz](<https://bestchai.bitbucket.io/shiviz/>) visualization tool. Instructions for converting log files to a ShiViz compatible log file are as follows:

```
go install github.com/DistributedClocks/GoVector
GoVector --log_type shiviz --log_dir path/to/logs --outfile out.log
```

Sample log files generated using the [govector\\\_logger](<https://github.com/Blueprint-uServices/blueprint/tree/main/examples/leaf/wiring/specs/govector.go>) wiring specification for Blueprint's leaf application can be found at [govector leaf logs](<https://github.com/Blueprint-uServices/blueprint/tree/main/plugins/govector/example_logs>).

## Index

- [func Instrument\(spec wiring.WiringSpec, serviceName string\)](<#Instrument>)
- [func Logger\(spec wiring.WiringSpec, procName string\) string](<#Logger>)
- [type GoVecLoggerClient](<#GoVecLoggerClient>)
  - [func \(node \*GoVecLoggerClient\) AddInstantiation\(builder golang.NamespaceBuilder\) error](<#GoVecLoggerClient.AddInstantiation>)
  - [func \(node \*GoVecLoggerClient\) AddInterfaces\(builder golang.ModuleBuilder\) error](<#GoVecLoggerClient.AddInterfaces>)
  - [func \(node \*GoVecLoggerClient\) AddToWorkspace\(builder golang.WorkspaceBuilder\) error](<#GoVecLoggerClient.AddToWorkspace>)
  - [func \(node \*GoVecLoggerClient\) GetInterface\(ctx ir.BuildContext\) \(service.ServiceInterface, error\)](<#GoVecLoggerClient.GetInterface>)
  - [func \(node \*GoVecLoggerClient\) ImplementsGolangNode\(\)](<#GoVecLoggerClient.ImplementsGolangNode>)
  - [func \(node \*GoVecLoggerClient\) Name\(\) string](<#GoVecLoggerClient.Name>)
  - [func \(node \*GoVecLoggerClient\) String\(\) string](<#GoVecLoggerClient.String>)
- [type GovecClientWrapper](<#GovecClientWrapper>)
  - [func \(node \*GovecClientWrapper\) AddInstantiation\(builder golang.NamespaceBuilder\) error](<#GovecClientWrapper.AddInstantiation>)
  - [func \(node \*GovecClientWrapper\) AddInterfaces\(builder golang.ModuleBuilder\) error](<#GovecClientWrapper.AddInterfaces>)
  - [func \(node \*GovecClientWrapper\) GenerateFuncs\(builder golang.ModuleBuilder\) error](<#GovecClientWrapper.GenerateFuncs>)
  - [func \(node \*GovecClientWrapper\) GetInterface\(ctx ir.BuildContext\) \(service.ServiceInterface, error\)](<#GovecClientWrapper.GetInterface>)
  - [func \(node \*GovecClientWrapper\) ImplementsGolangNode\(\)](<#GovecClientWrapper.ImplementsGolangNode>)
  - [func \(node \*GovecClientWrapper\) ImplementsGolangService\(\)](<#GovecClientWrapper.ImplementsGolangService>)
  - [func \(node \*GovecClientWrapper\) Name\(\) string](<#GovecClientWrapper.Name>)
  - [func \(node \*GovecClientWrapper\) String\(\) string](<#GovecClientWrapper.String>)
- [type GovecServerWrapper](<#GovecServerWrapper>)
  - [func \(node \*GovecServerWrapper\) AddInstantiation\(builder golang.NamespaceBuilder\) error](<#GovecServerWrapper.AddInstantiation>)
  - [func \(node \*GovecServerWrapper\) AddInterfaces\(builder golang.ModuleBuilder\) error](<#GovecServerWrapper.AddInterfaces>)
  - [func \(node \*GovecServerWrapper\) GenerateFuncs\(builder golang.ModuleBuilder\) error](<#GovecServerWrapper.GenerateFuncs>)
  - [func \(node \*GovecServerWrapper\) GetInterface\(ctx ir.BuildContext\) \(service.ServiceInterface, error\)](<#GovecServerWrapper.GetInterface>)
  - [func \(node \*GovecServerWrapper\) ImplementsGolangNode\(\)](<#GovecServerWrapper.ImplementsGolangNode>)
  - [func \(node \*GovecServerWrapper\) ImplementsGolangService\(\)](<#GovecServerWrapper.ImplementsGolangService>)
  - [func \(node \*GovecServerWrapper\) Name\(\) string](<#GovecServerWrapper.Name>)
  - [func \(node \*GovecServerWrapper\) String\(\) string](<#GovecServerWrapper.String>)


<a name="Instrument"></a>
## func [Instrument](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/wiring.go#L74>)

```go
func Instrument(spec wiring.WiringSpec, serviceName string)
```

[Instrument](<#Instrument>) can be used by the wiring specs to instrument the client and server side of a service with govector\-instrumentation to initialize, maintain, and propagate vector clocks. The instrumentation generates logging events appended with vector clock timestamps. Ensures that the logs are sent to a GoVector logger defined with name \`logger\`

### Wiring Spec Usage

```
govector.Instrument(spec, "my_service")
```

<a name="Logger"></a>
## func [Logger](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/wiring.go#L112>)

```go
func Logger(spec wiring.WiringSpec, procName string) string
```

[Logger](<#Logger>) can be used by the wiring specs to install a govector logger for process with name \`procName\`. Replaces the existing installed logger for the process.

A process with name \`procName\` must be defined before this function is called.

### Wiring Spec Usage

```
govector.Logger(spec, "my_process")
```

<a name="GoVecLoggerClient"></a>
## type [GoVecLoggerClient](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_logger.go#L15-L21>)

Blueprint IR Node that represents a GoVector logger instance

```go
type GoVecLoggerClient struct {
    golang.Node
    golang.Instantiable

    ClientName string
    Spec       *workflowspec.Service
}
```

<a name="GoVecLoggerClient.AddInstantiation"></a>
### func \(\*GoVecLoggerClient\) [AddInstantiation](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_logger.go#L43>)

```go
func (node *GoVecLoggerClient) AddInstantiation(builder golang.NamespaceBuilder) error
```

Implements golang.Instantiable

<a name="GoVecLoggerClient.AddInterfaces"></a>
### func \(\*GoVecLoggerClient\) [AddInterfaces](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_logger.go#L60>)

```go
func (node *GoVecLoggerClient) AddInterfaces(builder golang.ModuleBuilder) error
```

Implements golang.ProvidesInterface

<a name="GoVecLoggerClient.AddToWorkspace"></a>
### func \(\*GoVecLoggerClient\) [AddToWorkspace](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_logger.go#L55>)

```go
func (node *GoVecLoggerClient) AddToWorkspace(builder golang.WorkspaceBuilder) error
```

Implements golang.ProvidesModule

<a name="GoVecLoggerClient.GetInterface"></a>
### func \(\*GoVecLoggerClient\) [GetInterface](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_logger.go#L65>)

```go
func (node *GoVecLoggerClient) GetInterface(ctx ir.BuildContext) (service.ServiceInterface, error)
```

Implements service.ServiceNode

<a name="GoVecLoggerClient.ImplementsGolangNode"></a>
### func \(\*GoVecLoggerClient\) [ImplementsGolangNode](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_logger.go#L70>)

```go
func (node *GoVecLoggerClient) ImplementsGolangNode()
```

Implements golang.Node

<a name="GoVecLoggerClient.Name"></a>
### func \(\*GoVecLoggerClient\) [Name](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_logger.go#L33>)

```go
func (node *GoVecLoggerClient) Name() string
```

Implements ir.IRNode

<a name="GoVecLoggerClient.String"></a>
### func \(\*GoVecLoggerClient\) [String](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_logger.go#L38>)

```go
func (node *GoVecLoggerClient) String() string
```

Implements ir.IRNode

<a name="GovecClientWrapper"></a>
## type [GovecClientWrapper](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L17-L26>)

Blueprint IR Node that wraps the client\-side of a service to generate govec logs

```go
type GovecClientWrapper struct {
    golang.Service
    golang.Instantiable
    golang.GeneratesFuncs

    InstanceName string

    Wrapped     golang.Service
    GoVecClient *GoVecLoggerClient
    // contains filtered or unexported fields
}
```

<a name="GovecClientWrapper.AddInstantiation"></a>
### func \(\*GovecClientWrapper\) [AddInstantiation](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L71>)

```go
func (node *GovecClientWrapper) AddInstantiation(builder golang.NamespaceBuilder) error
```

Implements golang.Instantiable

<a name="GovecClientWrapper.AddInterfaces"></a>
### func \(\*GovecClientWrapper\) [AddInterfaces](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L115>)

```go
func (node *GovecClientWrapper) AddInterfaces(builder golang.ModuleBuilder) error
```

Implements golang.ProvidesInterface

<a name="GovecClientWrapper.GenerateFuncs"></a>
### func \(\*GovecClientWrapper\) [GenerateFuncs](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L95>)

```go
func (node *GovecClientWrapper) GenerateFuncs(builder golang.ModuleBuilder) error
```

Implements golang.GeneratesFuncs

<a name="GovecClientWrapper.GetInterface"></a>
### func \(\*GovecClientWrapper\) [GetInterface](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L110>)

```go
func (node *GovecClientWrapper) GetInterface(ctx ir.BuildContext) (service.ServiceInterface, error)
```

Implements service.ServiceNode

<a name="GovecClientWrapper.ImplementsGolangNode"></a>
### func \(\*GovecClientWrapper\) [ImplementsGolangNode](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L39>)

```go
func (node *GovecClientWrapper) ImplementsGolangNode()
```

Implements golang.Node

<a name="GovecClientWrapper.ImplementsGolangService"></a>
### func \(\*GovecClientWrapper\) [ImplementsGolangService](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L42>)

```go
func (node *GovecClientWrapper) ImplementsGolangService()
```

Implements golang.Service

<a name="GovecClientWrapper.Name"></a>
### func \(\*GovecClientWrapper\) [Name](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L29>)

```go
func (node *GovecClientWrapper) Name() string
```

Implements ir.IRNode

<a name="GovecClientWrapper.String"></a>
### func \(\*GovecClientWrapper\) [String](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_clientwrapper.go#L34>)

```go
func (node *GovecClientWrapper) String() string
```

Implements ir.IRNode

<a name="GovecServerWrapper"></a>
## type [GovecServerWrapper](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L17-L25>)

Blueprint IR node that wraps the server\-side of a service to generate govec compatible logs

```go
type GovecServerWrapper struct {
    golang.Service
    golang.Instantiable
    golang.GeneratesFuncs

    InstanceName string

    Wrapped golang.Service
    // contains filtered or unexported fields
}
```

<a name="GovecServerWrapper.AddInstantiation"></a>
### func \(\*GovecServerWrapper\) [AddInstantiation](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L71>)

```go
func (node *GovecServerWrapper) AddInstantiation(builder golang.NamespaceBuilder) error
```

Implements golang.Instantiable

<a name="GovecServerWrapper.AddInterfaces"></a>
### func \(\*GovecServerWrapper\) [AddInterfaces](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L113>)

```go
func (node *GovecServerWrapper) AddInterfaces(builder golang.ModuleBuilder) error
```

Implements golang.PRovidesInterface

<a name="GovecServerWrapper.GenerateFuncs"></a>
### func \(\*GovecServerWrapper\) [GenerateFuncs](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L93>)

```go
func (node *GovecServerWrapper) GenerateFuncs(builder golang.ModuleBuilder) error
```

Implements golang.GeneratesFuncs

<a name="GovecServerWrapper.GetInterface"></a>
### func \(\*GovecServerWrapper\) [GetInterface](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L108>)

```go
func (node *GovecServerWrapper) GetInterface(ctx ir.BuildContext) (service.ServiceInterface, error)
```

Implements service.ServiceNode

<a name="GovecServerWrapper.ImplementsGolangNode"></a>
### func \(\*GovecServerWrapper\) [ImplementsGolangNode](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L38>)

```go
func (node *GovecServerWrapper) ImplementsGolangNode()
```

Implements golang.Node

<a name="GovecServerWrapper.ImplementsGolangService"></a>
### func \(\*GovecServerWrapper\) [ImplementsGolangService](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L41>)

```go
func (node *GovecServerWrapper) ImplementsGolangService()
```

Implements golang.Service

<a name="GovecServerWrapper.Name"></a>
### func \(\*GovecServerWrapper\) [Name](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L28>)

```go
func (node *GovecServerWrapper) Name() string
```

Implements ir.IRNode

<a name="GovecServerWrapper.String"></a>
### func \(\*GovecServerWrapper\) [String](<https://github.com/blueprint-uservices/blueprint/blob/main/plugins/govector/ir_serverwrapper.go#L33>)

```go
func (node *GovecServerWrapper) String() string
```

Implements ir.IRNode

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
