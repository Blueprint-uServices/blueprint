<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# opentelemetry

```go
import "gitlab.mpi-sws.org/cld/blueprint/plugins/opentelemetry"
```

Package opentelemetry provides two plugins: \(i\) a plugin to generate and include an opentelemetry collector instance in a Blueprint application \(ii\) provides a modifier plugin to wrap the service with an OpenTelemetry wrapper to generate OT compatible traces/logs.

The package provides an in\-memory trace exporter implementation and a go\-client for generating traces on both the server and client side. The generated clients handle context propagation correctly on both the server and client sides.

The applications must use a backend.Tracer \(runtime/core/backend\) as the interface in the workflow.

## Index

- [Variables](<#variables>)
- [func DefineOpenTelemetryCollector\(spec wiring.WiringSpec, collectorName string\) string](<#DefineOpenTelemetryCollector>)
- [func Instrument\(spec wiring.WiringSpec, serviceName string\)](<#Instrument>)
- [func InstrumentUsingCustomCollector\(spec wiring.WiringSpec, serviceName string, collectorName string\)](<#InstrumentUsingCustomCollector>)
- [type OTCollectorInterface](<#OTCollectorInterface>)
  - [func \(xt \*OTCollectorInterface\) GetMethods\(\) \[\]service.Method](<#OTCollectorInterface.GetMethods>)
  - [func \(xt \*OTCollectorInterface\) GetName\(\) string](<#OTCollectorInterface.GetName>)
- [type OpenTelemetryClientWrapper](<#OpenTelemetryClientWrapper>)
  - [func \(node \*OpenTelemetryClientWrapper\) AddInstantiation\(builder golang.NamespaceBuilder\) error](<#OpenTelemetryClientWrapper.AddInstantiation>)
  - [func \(node \*OpenTelemetryClientWrapper\) AddInterfaces\(builder golang.ModuleBuilder\) error](<#OpenTelemetryClientWrapper.AddInterfaces>)
  - [func \(node \*OpenTelemetryClientWrapper\) GenerateFuncs\(builder golang.ModuleBuilder\) error](<#OpenTelemetryClientWrapper.GenerateFuncs>)
  - [func \(node \*OpenTelemetryClientWrapper\) GetInterface\(ctx ir.BuildContext\) \(service.ServiceInterface, error\)](<#OpenTelemetryClientWrapper.GetInterface>)
  - [func \(node \*OpenTelemetryClientWrapper\) ImplementsGolangNode\(\)](<#OpenTelemetryClientWrapper.ImplementsGolangNode>)
  - [func \(node \*OpenTelemetryClientWrapper\) ImplementsGolangService\(\)](<#OpenTelemetryClientWrapper.ImplementsGolangService>)
  - [func \(node \*OpenTelemetryClientWrapper\) Name\(\) string](<#OpenTelemetryClientWrapper.Name>)
  - [func \(node \*OpenTelemetryClientWrapper\) String\(\) string](<#OpenTelemetryClientWrapper.String>)
- [type OpenTelemetryCollector](<#OpenTelemetryCollector>)
  - [func \(node \*OpenTelemetryCollector\) AddContainerArtifacts\(target docker.ContainerWorkspace\) error](<#OpenTelemetryCollector.AddContainerArtifacts>)
  - [func \(node \*OpenTelemetryCollector\) AddContainerInstance\(target docker.ContainerWorkspace\) error](<#OpenTelemetryCollector.AddContainerInstance>)
  - [func \(node \*OpenTelemetryCollector\) GetInterface\(ctx ir.BuildContext\) \(service.ServiceInterface, error\)](<#OpenTelemetryCollector.GetInterface>)
  - [func \(node \*OpenTelemetryCollector\) Name\(\) string](<#OpenTelemetryCollector.Name>)
  - [func \(node \*OpenTelemetryCollector\) String\(\) string](<#OpenTelemetryCollector.String>)
- [type OpenTelemetryCollectorClient](<#OpenTelemetryCollectorClient>)
  - [func \(node \*OpenTelemetryCollectorClient\) AddInstantiation\(builder golang.NamespaceBuilder\) error](<#OpenTelemetryCollectorClient.AddInstantiation>)
  - [func \(node \*OpenTelemetryCollectorClient\) AddInterfaces\(builder golang.ModuleBuilder\) error](<#OpenTelemetryCollectorClient.AddInterfaces>)
  - [func \(node \*OpenTelemetryCollectorClient\) AddToWorkspace\(builder golang.WorkspaceBuilder\) error](<#OpenTelemetryCollectorClient.AddToWorkspace>)
  - [func \(node \*OpenTelemetryCollectorClient\) GetInterface\(ctx ir.BuildContext\) \(service.ServiceInterface, error\)](<#OpenTelemetryCollectorClient.GetInterface>)
  - [func \(node \*OpenTelemetryCollectorClient\) ImplementsGolangNode\(\)](<#OpenTelemetryCollectorClient.ImplementsGolangNode>)
  - [func \(node \*OpenTelemetryCollectorClient\) ImplementsOTCollectorClient\(\)](<#OpenTelemetryCollectorClient.ImplementsOTCollectorClient>)
  - [func \(node \*OpenTelemetryCollectorClient\) Name\(\) string](<#OpenTelemetryCollectorClient.Name>)
  - [func \(node \*OpenTelemetryCollectorClient\) String\(\) string](<#OpenTelemetryCollectorClient.String>)
- [type OpenTelemetryCollectorInterface](<#OpenTelemetryCollectorInterface>)
- [type OpenTelemetryServerWrapper](<#OpenTelemetryServerWrapper>)
  - [func \(node \*OpenTelemetryServerWrapper\) AddInstantiation\(builder golang.NamespaceBuilder\) error](<#OpenTelemetryServerWrapper.AddInstantiation>)
  - [func \(node \*OpenTelemetryServerWrapper\) AddInterfaces\(builder golang.ModuleBuilder\) error](<#OpenTelemetryServerWrapper.AddInterfaces>)
  - [func \(node \*OpenTelemetryServerWrapper\) GenerateFuncs\(builder golang.ModuleBuilder\) error](<#OpenTelemetryServerWrapper.GenerateFuncs>)
  - [func \(node \*OpenTelemetryServerWrapper\) GetInterface\(ctx ir.BuildContext\) \(service.ServiceInterface, error\)](<#OpenTelemetryServerWrapper.GetInterface>)
  - [func \(node \*OpenTelemetryServerWrapper\) ImplementsGolangNode\(\)](<#OpenTelemetryServerWrapper.ImplementsGolangNode>)
  - [func \(node \*OpenTelemetryServerWrapper\) ImplementsGolangService\(\)](<#OpenTelemetryServerWrapper.ImplementsGolangService>)
  - [func \(node \*OpenTelemetryServerWrapper\) Name\(\) string](<#OpenTelemetryServerWrapper.Name>)
  - [func \(node \*OpenTelemetryServerWrapper\) String\(\) string](<#OpenTelemetryServerWrapper.String>)


## Variables

<a name="DefaultOpenTelemetryCollectorName"></a>

```go
var DefaultOpenTelemetryCollectorName = "ot_collector"
```

<a name="DefineOpenTelemetryCollector"></a>
## func DefineOpenTelemetryCollector

```go
func DefineOpenTelemetryCollector(spec wiring.WiringSpec, collectorName string) string
```

Defines the OpenTelemetry collector as a process node

### Also creates a pointer to the collector and a client node that are used by OT clients

This doesn't need to be explicitly called, although it can if users want to control the placement of the opentelemetry collector

NOTE: Currently does not include the opentelemetry collector. This might change in the future.

<a name="Instrument"></a>
## func Instrument

```go
func Instrument(spec wiring.WiringSpec, serviceName string)
```

Instruments \`serviceName\` with OpenTelemetry. This can only be done if \`serviceName\` is a service declared in the wiring spec using \[workflow.Define\]

This call will only export traces to stdout and no external collector will be defined. Use the InstrumentUsingCustomCollector for exporting traces to a custom collector such as the ones provided by jaeger or zipkin.

<a name="InstrumentUsingCustomCollector"></a>
## func InstrumentUsingCustomCollector

```go
func InstrumentUsingCustomCollector(spec wiring.WiringSpec, serviceName string, collectorName string)
```

Instruments \`serviceName\` with OpenTelemetry. This can only be done if \`serviceName\` is a service declared in the wiring spec using \[workflow.Define\]

This call will configure the generated clients on server and client side to use the exporter provided by the custom collector indicated by the \`collectorName\`. The \`collectorName\` must be declared in the wiring spec.

<a name="OTCollectorInterface"></a>
## type OTCollectorInterface

Represents the OT interface exposed to the workflow.

```go
type OTCollectorInterface struct {
    service.ServiceInterface
    Wrapped service.ServiceInterface
}
```

<a name="OTCollectorInterface.GetMethods"></a>
### func \(\*OTCollectorInterface\) GetMethods

```go
func (xt *OTCollectorInterface) GetMethods() []service.Method
```



<a name="OTCollectorInterface.GetName"></a>
### func \(\*OTCollectorInterface\) GetName

```go
func (xt *OTCollectorInterface) GetName() string
```



<a name="OpenTelemetryClientWrapper"></a>
## type OpenTelemetryClientWrapper

Blueprint IR Node that wraps the client\-side of a service to generate ot compatible logs

```go
type OpenTelemetryClientWrapper struct {
    golang.Service
    golang.GeneratesFuncs

    WrapperName string

    Wrapped   golang.Service
    Collector OpenTelemetryCollectorInterface
    // contains filtered or unexported fields
}
```

<a name="OpenTelemetryClientWrapper.AddInstantiation"></a>
### func \(\*OpenTelemetryClientWrapper\) AddInstantiation

```go
func (node *OpenTelemetryClientWrapper) AddInstantiation(builder golang.NamespaceBuilder) error
```

Part of code generation compilation pass; provides instantiation snippet

<a name="OpenTelemetryClientWrapper.AddInterfaces"></a>
### func \(\*OpenTelemetryClientWrapper\) AddInterfaces

```go
func (node *OpenTelemetryClientWrapper) AddInterfaces(builder golang.ModuleBuilder) error
```

Part of code generation compilation pass; creates the interface definition code for the wrapper, and any new generated structs that are exposed and can be used by other IRNodes

<a name="OpenTelemetryClientWrapper.GenerateFuncs"></a>
### func \(\*OpenTelemetryClientWrapper\) GenerateFuncs

```go
func (node *OpenTelemetryClientWrapper) GenerateFuncs(builder golang.ModuleBuilder) error
```

Part of code generation compilation pass; provides implementation of interfaces from GenerateInterfaces

<a name="OpenTelemetryClientWrapper.GetInterface"></a>
### func \(\*OpenTelemetryClientWrapper\) GetInterface

```go
func (node *OpenTelemetryClientWrapper) GetInterface(ctx ir.BuildContext) (service.ServiceInterface, error)
```



<a name="OpenTelemetryClientWrapper.ImplementsGolangNode"></a>
### func \(\*OpenTelemetryClientWrapper\) ImplementsGolangNode

```go
func (node *OpenTelemetryClientWrapper) ImplementsGolangNode()
```



<a name="OpenTelemetryClientWrapper.ImplementsGolangService"></a>
### func \(\*OpenTelemetryClientWrapper\) ImplementsGolangService

```go
func (node *OpenTelemetryClientWrapper) ImplementsGolangService()
```



<a name="OpenTelemetryClientWrapper.Name"></a>
### func \(\*OpenTelemetryClientWrapper\) Name

```go
func (node *OpenTelemetryClientWrapper) Name() string
```



<a name="OpenTelemetryClientWrapper.String"></a>
### func \(\*OpenTelemetryClientWrapper\) String

```go
func (node *OpenTelemetryClientWrapper) String() string
```



<a name="OpenTelemetryCollector"></a>
## type OpenTelemetryCollector

Blueprint IR Node representing an OT COllector

```go
type OpenTelemetryCollector struct {
    docker.Container

    CollectorName string
    BindAddr      *address.BindConfig
    Iface         *goparser.ParsedInterface
}
```

<a name="OpenTelemetryCollector.AddContainerArtifacts"></a>
### func \(\*OpenTelemetryCollector\) AddContainerArtifacts

```go
func (node *OpenTelemetryCollector) AddContainerArtifacts(target docker.ContainerWorkspace) error
```



<a name="OpenTelemetryCollector.AddContainerInstance"></a>
### func \(\*OpenTelemetryCollector\) AddContainerInstance

```go
func (node *OpenTelemetryCollector) AddContainerInstance(target docker.ContainerWorkspace) error
```



<a name="OpenTelemetryCollector.GetInterface"></a>
### func \(\*OpenTelemetryCollector\) GetInterface

```go
func (node *OpenTelemetryCollector) GetInterface(ctx ir.BuildContext) (service.ServiceInterface, error)
```



<a name="OpenTelemetryCollector.Name"></a>
### func \(\*OpenTelemetryCollector\) Name

```go
func (node *OpenTelemetryCollector) Name() string
```



<a name="OpenTelemetryCollector.String"></a>
### func \(\*OpenTelemetryCollector\) String

```go
func (node *OpenTelemetryCollector) String() string
```



<a name="OpenTelemetryCollectorClient"></a>
## type OpenTelemetryCollectorClient

Blueprint IR Node that represents a client to the ot container

```go
type OpenTelemetryCollectorClient struct {
    golang.Node
    golang.Instantiable

    ClientName string
    ServerDial *address.DialConfig

    InstanceName string
    Iface        *goparser.ParsedInterface
    Constructor  *gocode.Constructor
}
```

<a name="OpenTelemetryCollectorClient.AddInstantiation"></a>
### func \(\*OpenTelemetryCollectorClient\) AddInstantiation

```go
func (node *OpenTelemetryCollectorClient) AddInstantiation(builder golang.NamespaceBuilder) error
```



<a name="OpenTelemetryCollectorClient.AddInterfaces"></a>
### func \(\*OpenTelemetryCollectorClient\) AddInterfaces

```go
func (node *OpenTelemetryCollectorClient) AddInterfaces(builder golang.ModuleBuilder) error
```



<a name="OpenTelemetryCollectorClient.AddToWorkspace"></a>
### func \(\*OpenTelemetryCollectorClient\) AddToWorkspace

```go
func (node *OpenTelemetryCollectorClient) AddToWorkspace(builder golang.WorkspaceBuilder) error
```



<a name="OpenTelemetryCollectorClient.GetInterface"></a>
### func \(\*OpenTelemetryCollectorClient\) GetInterface

```go
func (node *OpenTelemetryCollectorClient) GetInterface(ctx ir.BuildContext) (service.ServiceInterface, error)
```



<a name="OpenTelemetryCollectorClient.ImplementsGolangNode"></a>
### func \(\*OpenTelemetryCollectorClient\) ImplementsGolangNode

```go
func (node *OpenTelemetryCollectorClient) ImplementsGolangNode()
```



<a name="OpenTelemetryCollectorClient.ImplementsOTCollectorClient"></a>
### func \(\*OpenTelemetryCollectorClient\) ImplementsOTCollectorClient

```go
func (node *OpenTelemetryCollectorClient) ImplementsOTCollectorClient()
```



<a name="OpenTelemetryCollectorClient.Name"></a>
### func \(\*OpenTelemetryCollectorClient\) Name

```go
func (node *OpenTelemetryCollectorClient) Name() string
```



<a name="OpenTelemetryCollectorClient.String"></a>
### func \(\*OpenTelemetryCollectorClient\) String

```go
func (node *OpenTelemetryCollectorClient) String() string
```



<a name="OpenTelemetryCollectorInterface"></a>
## type OpenTelemetryCollectorInterface

Interface that indicates if an IRNode implements the OTCollector interface All custom collector clients \*\*must\*\* implement this interface

```go
type OpenTelemetryCollectorInterface interface {
    golang.Node
    golang.Instantiable
    ImplementsOTCollectorClient()
}
```

<a name="OpenTelemetryServerWrapper"></a>
## type OpenTelemetryServerWrapper

Blueprint IR Node that wraps the server\-side of a service to generate ot compatible logs

```go
type OpenTelemetryServerWrapper struct {
    golang.Service
    golang.Instantiable
    golang.GeneratesFuncs

    WrapperName string

    Wrapped   golang.Service
    Collector OpenTelemetryCollectorInterface
    // contains filtered or unexported fields
}
```

<a name="OpenTelemetryServerWrapper.AddInstantiation"></a>
### func \(\*OpenTelemetryServerWrapper\) AddInstantiation

```go
func (node *OpenTelemetryServerWrapper) AddInstantiation(builder golang.NamespaceBuilder) error
```

Part of code generation compilation pass; provides instantiation snippet

<a name="OpenTelemetryServerWrapper.AddInterfaces"></a>
### func \(\*OpenTelemetryServerWrapper\) AddInterfaces

```go
func (node *OpenTelemetryServerWrapper) AddInterfaces(builder golang.ModuleBuilder) error
```

Part of code generation compilation pass; creates the interface definition code for the wrapper, and any new generated structs that are exposed and can be used by other IRNodes

<a name="OpenTelemetryServerWrapper.GenerateFuncs"></a>
### func \(\*OpenTelemetryServerWrapper\) GenerateFuncs

```go
func (node *OpenTelemetryServerWrapper) GenerateFuncs(builder golang.ModuleBuilder) error
```

Part of code generation compilation pass; provides implementation of interfaces from GenerateInterfaces

<a name="OpenTelemetryServerWrapper.GetInterface"></a>
### func \(\*OpenTelemetryServerWrapper\) GetInterface

```go
func (node *OpenTelemetryServerWrapper) GetInterface(ctx ir.BuildContext) (service.ServiceInterface, error)
```



<a name="OpenTelemetryServerWrapper.ImplementsGolangNode"></a>
### func \(\*OpenTelemetryServerWrapper\) ImplementsGolangNode

```go
func (node *OpenTelemetryServerWrapper) ImplementsGolangNode()
```



<a name="OpenTelemetryServerWrapper.ImplementsGolangService"></a>
### func \(\*OpenTelemetryServerWrapper\) ImplementsGolangService

```go
func (node *OpenTelemetryServerWrapper) ImplementsGolangService()
```



<a name="OpenTelemetryServerWrapper.Name"></a>
### func \(\*OpenTelemetryServerWrapper\) Name

```go
func (node *OpenTelemetryServerWrapper) Name() string
```



<a name="OpenTelemetryServerWrapper.String"></a>
### func \(\*OpenTelemetryServerWrapper\) String

```go
func (node *OpenTelemetryServerWrapper) String() string
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
