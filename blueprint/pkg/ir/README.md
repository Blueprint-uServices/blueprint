<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# ir

```go
import "github.com/blueprint-uservices/blueprint/blueprint/pkg/ir"
```

Package ir provides the basic interfaces for Blueprint's Internal Representation \(IR\) and for subsequently generating application artifacts such as code and container images.

An application's IR representation is produced by constructing and then building a wiring spec using methods from the wiring package and from wiring extensions provided by plugins.

## Index

- [func CleanName\(name string\) string](<#CleanName>)
- [func Filter\[T any\]\(nodes \[\]IRNode\) \[\]T](<#Filter>)
- [func Is\[T any\]\(nodeType any\) bool](<#Is>)
- [func PrettyPrintNamespace\(instanceName string, namespaceType string, argNodes \[\]IRNode, childNodes \[\]IRNode\) string](<#PrettyPrintNamespace>)
- [func RegisterDefaultNamespace\[T IRNode\]\(name string, buildFunc func\(outputDir string, nodes \[\]IRNode\) error\)](<#RegisterDefaultNamespace>)
- [type ApplicationNode](<#ApplicationNode>)
  - [func \(app \*ApplicationNode\) GenerateArtifacts\(dir string\) error](<#ApplicationNode.GenerateArtifacts>)
  - [func \(app \*ApplicationNode\) GetAllIRNodes\(\) \[\]IRNode](<#ApplicationNode.GetAllIRNodes>)
  - [func \(app \*ApplicationNode\) GetNodes\(\) \[\]IRNode](<#ApplicationNode.GetNodes>)
  - [func \(app \*ApplicationNode\) ImplementsHasIRChildren\(\)](<#ApplicationNode.ImplementsHasIRChildren>)
  - [func \(node \*ApplicationNode\) Name\(\) string](<#ApplicationNode.Name>)
  - [func \(node \*ApplicationNode\) String\(\) string](<#ApplicationNode.String>)
- [type ArtifactGenerator](<#ArtifactGenerator>)
- [type BuildContext](<#BuildContext>)
- [type HasIRChildren](<#HasIRChildren>)
- [type IRConfig](<#IRConfig>)
- [type IRMetadata](<#IRMetadata>)
- [type IRNode](<#IRNode>)
  - [func FilterNodes\[T any\]\(nodes \[\]IRNode\) \[\]IRNode](<#FilterNodes>)
  - [func Remove\[T any\]\(nodes \[\]IRNode\) \[\]IRNode](<#Remove>)
  - [func Split\[T any\]\(nodes \[\]IRNode\) \(remaining \[\]IRNode, matches \[\]T\)](<#Split>)
- [type IRValue](<#IRValue>)
  - [func \(v \*IRValue\) Name\(\) string](<#IRValue.Name>)
  - [func \(v \*IRValue\) String\(\) string](<#IRValue.String>)
- [type VisitTracker](<#VisitTracker>)
- [type VisitTrackerImpl](<#VisitTrackerImpl>)
  - [func \(tracker \*VisitTrackerImpl\) Visited\(name string\) bool](<#VisitTrackerImpl.Visited>)


<a name="CleanName"></a>
## func [CleanName](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/irutil.go#L16>)

```go
func CleanName(name string) string
```

Returns name with only alphanumeric characters and all other symbols converted to underscores.

CleanName is primarily used by plugins to convert user\-defined service names into names that are valid as e.g. environment variables, command line arguments, etc.

<a name="Filter"></a>
## func [Filter](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/irutil.go#L27>)

```go
func Filter[T any](nodes []IRNode) []T
```

Returns a slice containing only nodes of type T

<a name="Is"></a>
## func [Is](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/irutil.go#L21>)

```go
func Is[T any](nodeType any) bool
```

Reports whether nodeType is an instance of type T

<a name="PrettyPrintNamespace"></a>
## func [PrettyPrintNamespace](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/irutil.go#L72>)

```go
func PrettyPrintNamespace(instanceName string, namespaceType string, argNodes []IRNode, childNodes []IRNode) string
```



<a name="RegisterDefaultNamespace"></a>
## func [RegisterDefaultNamespace](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/builders.go#L44>)

```go
func RegisterDefaultNamespace[T IRNode](name string, buildFunc func(outputDir string, nodes []IRNode) error)
```

When building an application, any IR nodes of type T that reside within the top\-level application will be built using the specified buildFunc.

<a name="ApplicationNode"></a>
## type [ApplicationNode](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L71-L78>)

The IR Node that represents the whole application. Building a wiring spec will return an ApplicationNode. An ApplicationNode can be built with the GenerateArtifacts method.

```go
type ApplicationNode struct {
    IRNode
    ArtifactGenerator
    HasIRChildren

    ApplicationName string
    Children        []IRNode
}
```

<a name="ApplicationNode.GenerateArtifacts"></a>
### func \(\*ApplicationNode\) [GenerateArtifacts](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L89>)

```go
func (app *ApplicationNode) GenerateArtifacts(dir string) error
```



<a name="ApplicationNode.GetAllIRNodes"></a>
### func \(\*ApplicationNode\) [GetAllIRNodes](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L99>)

```go
func (app *ApplicationNode) GetAllIRNodes() []IRNode
```



<a name="ApplicationNode.GetNodes"></a>
### func \(\*ApplicationNode\) [GetNodes](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L93>)

```go
func (app *ApplicationNode) GetNodes() []IRNode
```



<a name="ApplicationNode.ImplementsHasIRChildren"></a>
### func \(\*ApplicationNode\) [ImplementsHasIRChildren](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L97>)

```go
func (app *ApplicationNode) ImplementsHasIRChildren()
```



<a name="ApplicationNode.Name"></a>
### func \(\*ApplicationNode\) [Name](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L80>)

```go
func (node *ApplicationNode) Name() string
```



<a name="ApplicationNode.String"></a>
### func \(\*ApplicationNode\) [String](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L85>)

```go
func (node *ApplicationNode) String() string
```

Print the IR graph

<a name="ArtifactGenerator"></a>
## type [ArtifactGenerator](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L62-L66>)

Most IRNodes can generate code artifacts but they do so in the context of some [BuildContext](<#BuildContext>). A few IRNodes, however, can generate artifacts independent of any external context. Those IRNodes implement the ArtifactGenerator interface. Typically these are namespace nodes such as golang processes, linux containers, or docker deployments.

```go
type ArtifactGenerator interface {

    // Generate all artifacts for this node to the specified dir on the local filesystem.
    GenerateArtifacts(dir string) error
}
```

<a name="BuildContext"></a>
## type [BuildContext](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/buildcontext.go#L17-L20>)

All artifact generation occurs in the context of some BuildContext.

Plugins that control the artifact generation process should implement this interface.

```go
type BuildContext interface {
    VisitTracker
    ImplementsBuildContext()
}
```

<a name="HasIRChildren"></a>
## type [HasIRChildren](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L15-L18>)

Nodes that have IRNodes as children implement this interface

```go
type HasIRChildren interface {
    GetNodes() []IRNode
    ImplementsHasIRChildren()
}
```

<a name="IRConfig"></a>
## type [IRConfig](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L31-L42>)

IRConfig is an IR node that represents a configured or configurable variable. In a generated application, IRConfig nodes typically map down to things like environment variables or command line arguments, and can be passed all the way into specific application\-level instances. IRConfig is also used for addressing.

```go
type IRConfig interface {
    IRNode
    Optional() bool
    // At various points during the build process, an IRConfig node might have a concrete value
    // set, or it might be left unbound.
    HasValue() bool

    // Returns the current value of the config node if it has been set.  Config values
    // are always strings.
    Value() string
    ImplementsIRConfig()
}
```

<a name="IRMetadata"></a>
## type [IRMetadata](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L22-L25>)

Metadata is an IR node that exists in the IR of an application but does not build any artifacts or provide configuration or anything like that.

```go
type IRMetadata interface {
    IRNode
    ImplementsIRMetadata()
}
```

<a name="IRNode"></a>
## type [IRNode](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L9-L12>)

All nodes implement the IRNode interface

```go
type IRNode interface {
    Name() string
    String() string
}
```

<a name="FilterNodes"></a>
### func [FilterNodes](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/irutil.go#L51>)

```go
func FilterNodes[T any](nodes []IRNode) []IRNode
```

Returns a slice containing only nodes of type T

<a name="Remove"></a>
### func [Remove](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/irutil.go#L62>)

```go
func Remove[T any](nodes []IRNode) []IRNode
```

Returns a slice containing all nodes except those of type T

<a name="Split"></a>
### func [Split](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/irutil.go#L39>)

```go
func Split[T any](nodes []IRNode) (remaining []IRNode, matches []T)
```

Returns a slice containing only nodes of type T, and a slice containing all other nodes

<a name="IRValue"></a>
## type [IRValue](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L45-L47>)

A hard\-coded value

```go
type IRValue struct {
    Value string
}
```

<a name="IRValue.Name"></a>
### func \(\*IRValue\) [Name](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L49>)

```go
func (v *IRValue) Name() string
```



<a name="IRValue.String"></a>
### func \(\*IRValue\) [String](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/ir.go#L53>)

```go
func (v *IRValue) String() string
```



<a name="VisitTracker"></a>
## type [VisitTracker](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/buildcontext.go#L9-L12>)

A Blueprint application can potentially have multiple IR node instances spread across the application that generate the same code.

Visit tracker is a utility method used during artifact generation to prevent nodes from unnecessarily generating the same artifact repeatedly, when once will suffice.

```go
type VisitTracker interface {
    // Returns false on the first invocation of name; true on subsequent invocations
    Visited(name string) bool
}
```

<a name="VisitTrackerImpl"></a>
## type [VisitTrackerImpl](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/buildcontext.go#L24-L26>)

Basic implementation of the [VisitTracker](<#VisitTracker>) interface

```go
type VisitTrackerImpl struct {
    // contains filtered or unexported fields
}
```

<a name="VisitTrackerImpl.Visited"></a>
### func \(\*VisitTrackerImpl\) [Visited](<https://github.com/Blueprint-uServices/blueprint/blob/main/blueprint/pkg/ir/buildcontext.go#L28>)

```go
func (tracker *VisitTrackerImpl) Visited(name string) bool
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
