<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# wiring

```go
import "gitlab.mpi-sws.org/cld/blueprint/blueprint/pkg/wiring"
```

## Index

- [func BuildApplicationIR\(spec WiringSpec, name string, nodesToInstantiate ...string\) \(\*ir.ApplicationNode, error\)](<#BuildApplicationIR>)
- [type BuildFunc](<#BuildFunc>)
- [type DefaultNamespaceHandler](<#DefaultNamespaceHandler>)
  - [func \(handler \*DefaultNamespaceHandler\) Accepts\(nodeType any\) bool](<#DefaultNamespaceHandler.Accepts>)
  - [func \(handler \*DefaultNamespaceHandler\) AddEdge\(name string, node ir.IRNode\) error](<#DefaultNamespaceHandler.AddEdge>)
  - [func \(handler \*DefaultNamespaceHandler\) AddNode\(name string, node ir.IRNode\) error](<#DefaultNamespaceHandler.AddNode>)
  - [func \(handler \*DefaultNamespaceHandler\) Init\(namespace \*SimpleNamespace\)](<#DefaultNamespaceHandler.Init>)
  - [func \(handler \*DefaultNamespaceHandler\) LookupDef\(name string\) \(\*WiringDef, error\)](<#DefaultNamespaceHandler.LookupDef>)
- [type Namespace](<#Namespace>)
- [type SimpleNamespace](<#SimpleNamespace>)
  - [func \(namespace \*SimpleNamespace\) Debug\(message string, args ...any\)](<#SimpleNamespace.Debug>)
  - [func \(namespace \*SimpleNamespace\) Defer\(f func\(\) error\)](<#SimpleNamespace.Defer>)
  - [func \(namespace \*SimpleNamespace\) Error\(message string, args ...any\) error](<#SimpleNamespace.Error>)
  - [func \(namespace \*SimpleNamespace\) Get\(name string, dst any\) error](<#SimpleNamespace.Get>)
  - [func \(namespace \*SimpleNamespace\) GetProperties\(name string, key string, dst any\) error](<#SimpleNamespace.GetProperties>)
  - [func \(namespace \*SimpleNamespace\) GetProperty\(name string, key string, dst any\) error](<#SimpleNamespace.GetProperty>)
  - [func \(namespace \*SimpleNamespace\) Info\(message string, args ...any\)](<#SimpleNamespace.Info>)
  - [func \(namespace \*SimpleNamespace\) Init\(name, namespacetype string, parent Namespace, wiring WiringSpec, handler SimpleNamespaceHandler\)](<#SimpleNamespace.Init>)
  - [func \(namespace \*SimpleNamespace\) Instantiate\(name string, dst any\) error](<#SimpleNamespace.Instantiate>)
  - [func \(namespace \*SimpleNamespace\) Name\(\) string](<#SimpleNamespace.Name>)
  - [func \(namespace \*SimpleNamespace\) Put\(name string, node ir.IRNode\) error](<#SimpleNamespace.Put>)
- [type SimpleNamespaceHandler](<#SimpleNamespaceHandler>)
- [type WiringDef](<#WiringDef>)
  - [func \(def \*WiringDef\) AddProperty\(key string, value any\)](<#WiringDef.AddProperty>)
  - [func \(def \*WiringDef\) GetProperties\(key string, dst any\) error](<#WiringDef.GetProperties>)
  - [func \(def \*WiringDef\) GetProperty\(key string, dst any\) error](<#WiringDef.GetProperty>)
  - [func \(def \*WiringDef\) String\(\) string](<#WiringDef.String>)
- [type WiringError](<#WiringError>)
  - [func \(e WiringError\) Error\(\) string](<#WiringError.Error>)
- [type WiringSpec](<#WiringSpec>)
  - [func NewWiringSpec\(name string\) WiringSpec](<#NewWiringSpec>)


<a name="BuildApplicationIR"></a>
## func BuildApplicationIR

```go
func BuildApplicationIR(spec WiringSpec, name string, nodesToInstantiate ...string) (*ir.ApplicationNode, error)
```



<a name="BuildFunc"></a>
## type BuildFunc



```go
type BuildFunc func(Namespace) (ir.IRNode, error)
```

<a name="DefaultNamespaceHandler"></a>
## type DefaultNamespaceHandler



```go
type DefaultNamespaceHandler struct {
    SimpleNamespaceHandler
    Namespace *SimpleNamespace

    Nodes []ir.IRNode
    Edges []ir.IRNode
}
```

<a name="DefaultNamespaceHandler.Accepts"></a>
### func \(\*DefaultNamespaceHandler\) Accepts

```go
func (handler *DefaultNamespaceHandler) Accepts(nodeType any) bool
```

should return true if the specified node type should be built within this namespace, or false if we should ask the parent to build it instead. Most namespace implementations will only

```
accept certain node types, and will thus want to override this method.  For example, a golang process
will only accept golang nodes
```

<a name="DefaultNamespaceHandler.AddEdge"></a>
### func \(\*DefaultNamespaceHandler\) AddEdge

```go
func (handler *DefaultNamespaceHandler) AddEdge(name string, node ir.IRNode) error
```

This is called after getting a node from the parent namespace. By default it just saves the node as an edge. Namespace implementations can override this method to do other things.

<a name="DefaultNamespaceHandler.AddNode"></a>
### func \(\*DefaultNamespaceHandler\) AddNode

```go
func (handler *DefaultNamespaceHandler) AddNode(name string, node ir.IRNode) error
```

This is called after building a node in the current namespace. By default it just saves the node on the namespace. Namespace implementations can override this method to do other things.

<a name="DefaultNamespaceHandler.Init"></a>
### func \(\*DefaultNamespaceHandler\) Init

```go
func (handler *DefaultNamespaceHandler) Init(namespace *SimpleNamespace)
```



<a name="DefaultNamespaceHandler.LookupDef"></a>
### func \(\*DefaultNamespaceHandler\) LookupDef

```go
func (handler *DefaultNamespaceHandler) LookupDef(name string) (*WiringDef, error)
```

Look up a WiringDef; default implementation directly consults the WiringSpec.

```
callers can override this if they want to restrict, modify, or wrap definitions
that get instantiated within this namespace.
```

<a name="Namespace"></a>
## type Namespace

A Namespace is used during the IR\-building process to accumulate built nodes.

Blueprint has several basic out\-of\-the\-box namespaces that are used when building applications. A plugin can implement its own custom namespace. Implementing a custom Namespace is useful to achieve any of the following:

- Namespaces are the mechanism for limiting the visibility and addressibility of nodes
- Namespaces are the mechanism for templating nodes \(e.g. to implement replication of nodes\)

For example, to build a GoProcess that contains Golang object instances, there will be a Namespace that accumulates Golang object instance nodes during the building process, and then creates a GoProcess namespace node.

Most namespace implementations should extend the BasicNamespace struct

```go
type Namespace interface {
    Name() string                                         // The name of this namespace
    Get(name string, dst any) error                       // Get an ir.IRNode from this namespace or a parent namespace, possibly building it.  Places the ir.IRNode in the pointer dst.  dst can be an ir.IRNode or any implementation of an ir.IRNode
    Instantiate(name string, dst any) error               // The same as Get, but without creating a dependency (an edge) into the current namespace.  Places the ir.IRNode in the pointer dst.  dst can be an ir.IRNode or any implementation of an ir.IRNode
    GetProperty(name string, key string, dst any) error   // Get a property from this namespace; dst should be a pointer to value
    GetProperties(name string, key string, dst any) error // Get a slice property from this namespace; dst should be a pointer to a slice
    Put(name string, node ir.IRNode) error                // Put a node into this namespace
    Defer(f func() error)                                 // Enqueue a function to be executed once finished building the current nodes

    Info(message string, args ...any)        // Logging
    Warn(message string, args ...any)        // Logging
    Error(message string, args ...any) error // Logging
}
```

<a name="SimpleNamespace"></a>
## type SimpleNamespace

A SimpleNamespace implements all of the Namespace methods and only requires users to implement a SimpleNamespaceHandler interface. Most plugins will want to use SimpleNamespace rather than directly implementing Namespace.

See the documentation of SimpleNamespaceHandler for methods to override.

```go
type SimpleNamespace struct {
    Namespace

    NamespaceName   string                 // A name for this namespace
    NamespaceType   string                 // The type of this namespace
    ParentNamespace Namespace              // The parent namespace that created this namespace; can be nil
    Wiring          WiringSpec             // The wiring spec
    Handler         SimpleNamespaceHandler // User-provided handler
    Seen            map[string]ir.IRNode   // Cache of built nodes
    Added           map[string]any         // Nodes that have been passed to the handler
    Deferred        []func() error         // Deferred functions to execute
    // contains filtered or unexported fields
}
```

<a name="SimpleNamespace.Debug"></a>
### func \(\*SimpleNamespace\) Debug

```go
func (namespace *SimpleNamespace) Debug(message string, args ...any)
```

Augments debug messages with information about the namespace

<a name="SimpleNamespace.Defer"></a>
### func \(\*SimpleNamespace\) Defer

```go
func (namespace *SimpleNamespace) Defer(f func() error)
```



<a name="SimpleNamespace.Error"></a>
### func \(\*SimpleNamespace\) Error

```go
func (namespace *SimpleNamespace) Error(message string, args ...any) error
```

Augments debug messages with information about the namespace

<a name="SimpleNamespace.Get"></a>
### func \(\*SimpleNamespace\) Get

```go
func (namespace *SimpleNamespace) Get(name string, dst any) error
```



<a name="SimpleNamespace.GetProperties"></a>
### func \(\*SimpleNamespace\) GetProperties

```go
func (namespace *SimpleNamespace) GetProperties(name string, key string, dst any) error
```



<a name="SimpleNamespace.GetProperty"></a>
### func \(\*SimpleNamespace\) GetProperty

```go
func (namespace *SimpleNamespace) GetProperty(name string, key string, dst any) error
```



<a name="SimpleNamespace.Info"></a>
### func \(\*SimpleNamespace\) Info

```go
func (namespace *SimpleNamespace) Info(message string, args ...any)
```

Augments debug messages with information about the namespace

<a name="SimpleNamespace.Init"></a>
### func \(\*SimpleNamespace\) Init

```go
func (namespace *SimpleNamespace) Init(name, namespacetype string, parent Namespace, wiring WiringSpec, handler SimpleNamespaceHandler)
```



<a name="SimpleNamespace.Instantiate"></a>
### func \(\*SimpleNamespace\) Instantiate

```go
func (namespace *SimpleNamespace) Instantiate(name string, dst any) error
```



<a name="SimpleNamespace.Name"></a>
### func \(\*SimpleNamespace\) Name

```go
func (namespace *SimpleNamespace) Name() string
```



<a name="SimpleNamespace.Put"></a>
### func \(\*SimpleNamespace\) Put

```go
func (namespace *SimpleNamespace) Put(name string, node ir.IRNode) error
```



<a name="SimpleNamespaceHandler"></a>
## type SimpleNamespaceHandler

Has four methods with default implementations that callers can override with custom logic:

- LookupDef\(name\) \- look up a WiringDef; default implementation directly consults the WiringSpec. callers can override this if they want to restrict, modify, or wrap definitions that get instantiated within this namespace.
- Accepts\(nodeType\) \- should return true if the specified node type should be built within this namespace, or false if we should ask the parent to build it instead. Most namespace implementations will only accept certain node types, and will thus want to override this method. For example, a golang process will only accept golang nodes
- AddNode\(name, ir.IRNode\) \- this is called when a node is created within this namespace. The SimpleNamespace internally saves the node for future lookups; callers might want to save the node e.g. as a child within a node that is being created.
- AddEdge\(name, ir.IRNode\) \- this is called when a node was created by a parent namespace but referenced within this namespace. The SimpleNamespace internally saves the node for future lookups; callers might want to save the node e.g. as an argument to the node that is being created

```go
type SimpleNamespaceHandler interface {
    Init(*SimpleNamespace)
    LookupDef(string) (*WiringDef, error)
    Accepts(any) bool
    AddEdge(string, ir.IRNode) error
    AddNode(string, ir.IRNode) error
}
```

<a name="WiringDef"></a>
## type WiringDef



```go
type WiringDef struct {
    Name       string
    NodeType   any
    Build      BuildFunc
    Properties map[string][]any
}
```

<a name="WiringDef.AddProperty"></a>
### func \(\*WiringDef\) AddProperty

```go
func (def *WiringDef) AddProperty(key string, value any)
```



<a name="WiringDef.GetProperties"></a>
### func \(\*WiringDef\) GetProperties

```go
func (def *WiringDef) GetProperties(key string, dst any) error
```



<a name="WiringDef.GetProperty"></a>
### func \(\*WiringDef\) GetProperty

```go
func (def *WiringDef) GetProperty(key string, dst any) error
```



<a name="WiringDef.String"></a>
### func \(\*WiringDef\) String

```go
func (def *WiringDef) String() string
```



<a name="WiringError"></a>
## type WiringError



```go
type WiringError struct {
    Errors []error
}
```

<a name="WiringError.Error"></a>
### func \(WiringError\) Error

```go
func (e WiringError) Error() string
```



<a name="WiringSpec"></a>
## type WiringSpec



```go
type WiringSpec interface {
    Define(name string, nodeType any, build BuildFunc) // Adds a named node definition to the spec that can be built with the provided build function
    GetDef(name string) *WiringDef                     // For use by plugins to access the defined build functions and metadata
    Defs() []string                                    // Returns names of all defined nodes

    Alias(name string, pointsto string)   // Defines an alias to another defined node; these can be recursive
    GetAlias(alias string) (string, bool) // Gets the value of the specified alias, if it exists

    SetProperty(name string, key string, value any)       // Sets a static property value in the wiring spec, replacing any existing value specified
    AddProperty(name string, key string, value any)       // Adds a static property value in the wiring spec
    GetProperty(name string, key string, dst any) error   // Gets a static property value from the wiring spec
    GetProperties(name string, key string, dst any) error // Gets all static property values from the wiring spec

    String() string // Returns a string representation of everything that has been defined

    // Errors while building a wiring spec are accumulated within the wiring spec, rather than as return values to calls
    AddError(err error) // Used by plugins to signify an error; the error will be returned by a call to Err or GetBlueprint
    Err() error         // Gets an error if there is currently one

    BuildIR(nodesToInstantiate ...string) (*ir.ApplicationNode, error) // After defining everything, this builds the IR for the specified named nodes (implicitly including dependencies of those nodes)
}
```

<a name="NewWiringSpec"></a>
### func NewWiringSpec

```go
func NewWiringSpec(name string) WiringSpec
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
